<% unless @new_bids.blank? && @existing_bids.blank? %>

	<% @new_bids.group_by(&:line_item).each do |line_item, bids| %>
		<% bids.each do |bid| %>
			<% if bid.valid? %>
				$("#<%= line_item.id %> .<%= bid.bid_type[0..3] %> .invalid").remove();
				$("#<%= line_item.id %> .<%= bid.bid_type[0..3] %>").append("<%= escape_javascript(render bid) %>").effect("highlight", {}, 5000);
				$("#<%= line_item.id %> .<%= bid.bid_type[0..3] %> input").val('');    
			<% else %>
				$("#<%= line_item.id %> .<%= bid.bid_type[0..3] %>").append("<%= escape_javascript(render 'seller/invalid_bid_msg') %>");
			<% end %>
		<% end %>
	<% end %>

	<% @existing_bids.group_by(&:line_item).each do |line_item, bids| %>
		<% bids.each do |bid| %>
			<% if bid.valid? %>
				$("#<%= line_item.id %> .<%= bid.bid_type[0..3] %> .invalid").remove();
				$("#<%= line_item.id %> .<%= bid.bid_type[0..3] %> #bid_<%= bid.id %>").html("<%= escape_javascript(render bid) %>").effect("highlight", {}, 5000);
				$("#<%= line_item.id %> .<%= bid.bid_type[0..3] %> input").val('');    
			<% else %>
				$("#<%= line_item.id %> .<%= bid.bid_type[0..3] %>").append("<%= escape_javascript(render 'seller/invalid_bid_msg') %>");
			<% end %>
		<% end %>
	<% end %>
	
<% else %>

	$("#bidding-message").html("<%= escape_javascript(render 'seller/invalid_bid_msg') %>").effect("highlight", {}, 5000);

<% end %>
